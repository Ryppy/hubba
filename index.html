<html>
<head>
<title>Filefy</title>
</head>
<body>
  <div id="main-content">
    <input onchange="torrentArrived(this.files)" type="file" accept="application/x-bittorrent" id="torrentFileChooser" name="torrentFile[]" multiple>
    <!-- <input onchange="addFiles(this.files)" type="file" id="files" name="files[]" multiple> -->
  </div>
  <!-- <script type="text/javascript" src="files.js"></script> -->
  <script type="text/javascript" src="bencoding.js"></script>
  <script type="text/javascript" src="randomness.js"></script>
  <script type="text/javascript">
    (function() {
      console.log(nodeID);
      // var list = ["aaa", 1, "a", {a:1, b:2}]
      //  , res = BEncode.encode(list);
      //  console.log(list);
      //  console.log(res);
      //  console.log(BEncode.decode(res));
    })();

    var torrentArrived = function(files) {
      
      var reader = new FileReader()
        , blob = undefined;

      reader.onloadend = function(event) {

        if (event.target.readyState == FileReader.DONE) {

          console.log(BEncode.decode(event.target.result));
        }
      }

      for (var i = files.length - 1; i >= 0; i--) {

        blob = files[i].slice();
        reader.readAsText(blob);
      }
    };
  </script>
</body>
</html>
